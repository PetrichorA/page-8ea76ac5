!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).localforage=e()}((function(){return function e(t,r,n){function o(a,u){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=r[a]={exports:{}};t[a][0].call(s.exports,(function(e){return o(t[a][1][e]||e)}),s,s.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){(function(e){"use strict";function r(){f=!0;for(var e,t,r=s.length;r;){for(t=s,s=[],e=-1;++e<r;)t[e]();r=s.length}f=!1}var n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(r),u=e.document.createTextNode("");a.observe(u,{characterData:!0}),n=function(){u.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var c=new e.MessageChannel;c.port1.onmessage=r,n=function(){c.port2.postMessage(0)}}var f,s=[];t.exports=function(e){1!==s.push(e)||f||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";function n(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,e!==n&&c(this,e)}function i(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function a(e,t,r){s((function(){var n;try{n=t(r)}catch(t){return l.reject(e,t)}n===e?l.reject(e,new TypeError("Cannot resolve promise with itself")):l.resolve(e,n)}))}function u(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function c(e,t){function r(t){o||(o=!0,l.reject(e,t))}function n(t){o||(o=!0,l.resolve(e,t))}var o=!1,i=f((function(){t(n,r)}));"error"===i.status&&r(i.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}var s=e(1),l={},d=["REJECTED"],v=["FULFILLED"],h=["PENDING"];t.exports=r=o,o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===v||"function"!=typeof t&&this.state===d)return this;var r=new this.constructor(n);return this.state!==h?a(r,this.state===v?e:t,this.outcome):this.queue.push(new i(r,e,t)),r},i.prototype.callFulfilled=function(e){l.resolve(this.promise,e)},i.prototype.otherCallFulfilled=function(e){a(this.promise,this.onFulfilled,e)},i.prototype.callRejected=function(e){l.reject(this.promise,e)},i.prototype.otherCallRejected=function(e){a(this.promise,this.onRejected,e)},l.resolve=function(e,t){var r=f(u,t);if("error"===r.status)return l.reject(e,r.value);var n=r.value;if(n)c(e,n);else{e.state=v,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},l.reject=function(e,t){e.state=d,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},r.resolve=function(e){return e instanceof this?e:l.resolve(new this(n),e)},r.reject=function(e){var t=new this(n);return l.reject(t,e)},r.all=function(e){function t(e,t){r.resolve(e).then((function(e){a[t]=e,++u!==o||i||(i=!0,l.resolve(f,a))}),(function(e){i||(i=!0,l.reject(f,e))}))}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=new Array(o),u=0,c=-1,f=new this(n);++c<o;)t(e[c],c);return f},r.race=function(e){function t(e){r.resolve(e).then((function(e){i||(i=!0,l.resolve(u,e))}),(function(e){i||(i=!0,l.reject(u,e))}))}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,i=!1;if(!o)return this.resolve([]);for(var a=-1,u=new this(n);++a<o;)t(e[a]);return u}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";function n(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}function o(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function i(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function a(e){return"boolean"==typeof m?_.resolve(m):function(e){return new _((function(t){var r=e.transaction(S,"readwrite"),o=n([""]);r.objectStore(S).put(o,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return m=e}))}function u(e,t){return new _((function(r,n){if(e.db){if(!t)return r(e.db);(function(e){var t=w[e.name],r={};r.promise=new _((function(e){r.resolve=e})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise})(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=g.open.apply(g,o);t&&(i.onupgradeneeded=function(t){var r=i.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(S)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),n(i.error)},i.onsuccess=function(){r(i.result),function(e){var t=w[e.name].deferredOperations.pop();t&&t.resolve()}(e)}}))}function c(e){return n([function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}(atob(e.data))],{type:e.type})}function f(e){return e&&e.__local_forage_encoded_blob}function s(e){var t=this,r=t._initReady().then((function(){var e=w[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return i(r,e,e),r}function l(e){var t,r,n,o,i,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var f=new ArrayBuffer(a),s=new Uint8Array(f);for(t=0;t<u;t+=4)r=A.indexOf(e[t]),n=A.indexOf(e[t+1]),o=A.indexOf(e[t+2]),i=A.indexOf(e[t+3]),s[c++]=r<<2|n>>4,s[c++]=(15&n)<<4|o>>2,s[c++]=(3&o)<<6|63&i;return f}function d(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=A[r[t]>>2],n+=A[(3&r[t])<<4|r[t+1]>>4],n+=A[(15&r[t+1])<<2|r[t+2]>>6],n+=A[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function v(e,t,r,n){var i=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var a=new _((function(o,a){i.ready().then((function(){void 0===t&&(t=null);var u=t,c=i._dbInfo;c.serializer.serialize(t,(function(t,f){f?a(f):c.db.transaction((function(r){r.executeSql("INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(u)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void o(v.apply(i,[e,u,r,n-1]));a(t)}}))}))})).catch(a)}));return o(a,r),a}function h(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function y(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(Y(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}function p(e){for(var t in X)if(X.hasOwnProperty(t)&&X[t]===e)return!0;return!1}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}();"undefined"==typeof Promise&&e(3);var m,w,_=Promise,S="local-forage-detect-blob-support",E=Object.prototype.toString,I={_driver:"asyncStorage",_initStorage:function(e){function t(){return _.resolve()}var r=this,n={db:null};if(e)for(var o in e)n[o]=e[o];w||(w={});var i=w[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},w[n.name]=i),i.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=s);for(var a=[],c=0;c<i.forages.length;c++){var f=i.forages[c];f!==r&&a.push(f._initReady().catch(t))}var l=i.forages.slice(0);return _.all(a).then((function(){return n.db=i.db,function(e){return u(e,!1)}(n)})).then((function(e){return n.db=e,function(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}(n,r._defaultConfig.version)?function(e){return u(e,!0)}(n):e})).then((function(e){n.db=i.db=e,r._dbInfo=n;for(var t=0;t<l.length;t++){var o=l[t];o!==r&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},iterate:function(e,t){var r=this,n=new _((function(t,n){r.ready().then((function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName).openCursor(),a=1;i.onsuccess=function(){var r=i.result;if(r){var n=r.value;f(n)&&(n=c(n));var o=e(n,r.key,a++);void 0!==o?t(o):r.continue()}else t()},i.onerror=function(){n(i.error)}})).catch(n)}));return o(n,t),n},getItem:function(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new _((function(t,n){r.ready().then((function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName).get(e);i.onsuccess=function(){var e=i.result;void 0===e&&(e=null),f(e)&&(e=c(e)),t(e)},i.onerror=function(){n(i.error)}})).catch(n)}));return o(n,t),n},setItem:function(e,t,r){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new _((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===E.call(t)?a(i.db).then((function(e){return e?t:function(e){return new _((function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}(t)})):t})).then((function(t){var n=i.db.transaction(i.storeName,"readwrite"),a=n.objectStore(i.storeName).put(t,e);null===t&&(t=void 0),n.oncomplete=function(){void 0===t&&(t=null),r(t)},n.onabort=n.onerror=function(){var e=a.error?a.error:a.transaction.error;o(e)}})).catch(o)}));return o(i,r),i},removeItem:function(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new _((function(t,n){r.ready().then((function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}})).catch(n)}));return o(n,t),n},clear:function(e){var t=this,r=new _((function(e,r){t.ready().then((function(){var n=t._dbInfo,o=n.db.transaction(n.storeName,"readwrite"),i=o.objectStore(n.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}})).catch(r)}));return o(r,e),r},length:function(e){var t=this,r=new _((function(e,r){t.ready().then((function(){var n=t._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){r(o.error)}})).catch(r)}));return o(r,e),r},key:function(e,t){var r=this,n=new _((function(t,n){return e<0?void t(null):void r.ready().then((function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,u=i.openCursor();u.onsuccess=function(){var r=u.result;return r?void(0===e||a?t(r.key):(a=!0,r.advance(e))):void t(null)},u.onerror=function(){n(u.error)}})).catch(n)}));return o(n,t),n},keys:function(e){var t=this,r=new _((function(e,r){t.ready().then((function(){var n=t._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName).openCursor(),i=[];o.onsuccess=function(){var t=o.result;return t?(i.push(t.key),void t.continue()):void e(i)},o.onerror=function(){r(o.error)}})).catch(r)}));return o(r,e),r}},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=/^~~local_forage_type~([^~]+)~/,j="__lfsc__:",N=j.length,O="arbf",B="blob",R="si08",k="ui08",x="uic8",C="si16",L="si32",T="ur16",F="ui32",z="fl32",M="fl64",P=N+O.length,q=Object.prototype.toString,U={serialize:function(e,t){var r="";if(e&&(r=q.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===q.call(e.buffer))){var n,o=j;e instanceof ArrayBuffer?(n=e,o+=O):(n=e.buffer,"[object Int8Array]"===r?o+=R:"[object Uint8Array]"===r?o+=k:"[object Uint8ClampedArray]"===r?o+=x:"[object Int16Array]"===r?o+=C:"[object Uint16Array]"===r?o+=T:"[object Int32Array]"===r?o+=L:"[object Uint32Array]"===r?o+=F:"[object Float32Array]"===r?o+=z:"[object Float64Array]"===r?o+=M:t(new Error("Failed to get type for BinaryArray"))),t(o+d(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r="~~local_forage_type~"+e.type+"~"+d(this.result);t(j+B+r)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}},deserialize:function(e){if(e.substring(0,N)!==j)return JSON.parse(e);var t,r=e.substring(P),o=e.substring(N,P);if(o===B&&D.test(r)){var i=r.match(D);t=i[1],r=r.substring(i[0].length)}var a=l(r);switch(o){case O:return a;case B:return n([a],{type:t});case R:return new Int8Array(a);case k:return new Uint8Array(a);case x:return new Uint8ClampedArray(a);case C:return new Int16Array(a);case T:return new Uint16Array(a);case L:return new Int32Array(a);case F:return new Uint32Array(a);case z:return new Float32Array(a);case M:return new Float64Array(a);default:throw new Error("Unkown type: "+o)}},stringToBuffer:l,bufferToString:d},W={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new _((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return n(e)}r.db.transaction((function(o){o.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}))}));return r.serializer=U,o},iterate:function(e,t){var r=this,n=new _((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){r.executeSql("SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,a=i.length,u=0;u<a;u++){var c=i.item(u),f=c.value;if(f&&(f=o.serializer.deserialize(f)),void 0!==(f=e(f,c.key,u+1)))return void t(f)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return o(n,t),n},getItem:function(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new _((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){r.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return o(n,t),n},setItem:function(e,t,r){return v.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new _((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){r.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return o(n,t),n},clear:function(e){var t=this,r=new _((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){t.executeSql("DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return o(r,e),r},length:function(e){var t=this,r=new _((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){t.executeSql("SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return o(r,e),r},key:function(e,t){var r=this,n=new _((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){r.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return o(n,t),n},keys:function(e){var t=this,r=new _((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){t.executeSql("SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return o(r,e),r}},Q={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=t.name+"/",t.storeName!==this._defaultConfig.storeName&&(t.keyPrefix+=t.storeName+"/"),this._dbInfo=t,t.serializer=U,_.resolve()},iterate:function(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,a=1,u=0;u<i;u++){var c=localStorage.key(u);if(0===c.indexOf(n)){var f=localStorage.getItem(c);if(f&&(f=t.serializer.deserialize(f)),void 0!==(f=e(f,c.substring(o),a++)))return f}}}));return o(n,t),n},getItem:function(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return o(n,t),n},setItem:function(e,t,r){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new _((function(o,i){var a=n._dbInfo;a.serializer.serialize(t,(function(t,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+e,t),o(r)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||i(e),i(e)}}))}))}));return o(i,r),i},removeItem:function(e,t){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return o(n,t),n},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return o(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return o(t,e),t},key:function(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return o(n,t),n},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++)0===localStorage.key(o).indexOf(e.keyPrefix)&&n.push(localStorage.key(o).substring(e.keyPrefix.length));return n}));return o(r,e),r}},G={},X={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},H=[X.INDEXEDDB,X.WEBSQL,X.LOCALSTORAGE],J=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],K={description:"",driver:H.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},V={};V[X.INDEXEDDB]=function(){try{if(!g)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),V[X.WEBSQL]="function"==typeof openDatabase,V[X.LOCALSTORAGE]=function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}();var Y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Z=new(function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.INDEXEDDB=X.INDEXEDDB,this.LOCALSTORAGE=X.LOCALSTORAGE,this.WEBSQL=X.WEBSQL,this._defaultConfig=y({},K),this._config=y({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":b(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new _((function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),i=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void r(o);if(p(e._driver))return void r(i);for(var a=J.concat("_initStorage"),u=0;u<a.length;u++){var c=a[u];if(!c||!e[c]||"function"!=typeof e[c])return void r(o)}var f=_.resolve(!0);"_support"in e&&(f=e._support&&"function"==typeof e._support?e._support():_.resolve(!!e._support)),f.then((function(r){V[n]=r,G[n]=e,t()}),r)}catch(e){r(e)}}));return i(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=this,o=_.resolve().then((function(){if(!p(e)){if(G[e])return G[e];throw new Error("Driver not found.")}switch(e){case n.INDEXEDDB:return I;case n.LOCALSTORAGE:return Q;case n.WEBSQL:return W}}));return i(o,t,r),o},e.prototype.getSerializer=function(e){var t=_.resolve(U);return i(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return i(r,e,e),r},e.prototype.setDriver=function(e,t,r){function n(){a._config.driver=a.driver()}function o(e){return a._extend(e),n(),a._ready=a._initStorage(a._config),a._ready}var a=this;Y(e)||(e=[e]);var u=this._getSupportedDrivers(e),c=null!==this._driverSet?this._driverSet.catch((function(){return _.resolve()})):_.resolve();return this._driverSet=c.then((function(){var e=u[0];return a._dbInfo=null,a._ready=null,a.getDriver(e).then((function(e){a._driver=e._driver,n(),a._wrapLibraryMethodsWithReady(),a._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var i=e[t];return t++,a._dbInfo=null,a._ready=null,a.getDriver(i).then(o).catch(r)}n();var u=new Error("No available storage method found.");return a._driverSet=_.reject(u),a._driverSet}()}}(u)}))})).catch((function(){n();var e=new Error("No available storage method found.");return a._driverSet=_.reject(e),a._driverSet})),i(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!V[e]},e.prototype._extend=function(e){y(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<J.length;e++)h(this,J[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=Z},{3:3}]},{},[4])(4)}));